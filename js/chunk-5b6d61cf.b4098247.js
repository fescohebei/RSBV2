(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b6d61cf"],{"0492":function(e,a,t){},"16e5":function(e,a,t){"use strict";var o=t("0492"),i=t.n(o);i.a},e76f:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-layout",[t("a-layout-content",[t("a-card",{attrs:{bordered:!1}},[t("div",[t("a-form",[t("a-form-item",[e.rolesb?t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(a){return e.addSubAccount("city")}}},[e._v("添加")]):e._e()],1)],1)],1),t("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,rowKey:"CityCode"},scopedSlots:e._u([{key:"CityCode",fn:function(a,o){return t("span",{staticStyle:{"text-align":"right"}},[e._v("\n          "+e._s(e.cityArray[o.CityCode])+"\n        ")])}},{key:"shebao",fn:function(a,o){return t("span",{staticStyle:{"text-align":"right"}},[e._l(o.Detail,function(a,o){return[t("a-tag",{key:o,attrs:{color:"blue"}},[e._v("\n              "+e._s(e.ShebaoType[a.ShebaoType])+"             \n            ")])]})],2)}},{key:"action",fn:function(a,o){return t("span",{staticStyle:{"text-align":"right"}},[t("a",{on:{click:function(a){return e.detail(o)}}},[e._v("详情")]),e.rolesb?t("a-divider",{attrs:{type:"vertical"}}):e._e(),e.rolesb?t("a",{on:{click:function(a){return e.addSubAccount("other",o)}}},[e._v("添加其他险种")]):e._e()],1)}}])},[t("template",{slot:"footer"},[t("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2),t("a-modal",{attrs:{title:"添加",visible:e.showaddLayer,"confirm-loading":e.confirmLoading,width:1050,zIndex:100},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-row",[t("a-col",{attrs:{span:24}},[t("a-alert",{attrs:{type:"warning"}},[t("span",{attrs:{slot:"description"},slot:"description"},[e._v("\n                1.所填内容，如果无最低填0，无上限填1000000；"),t("br"),e._v("2.如果个人有上限，企业无上限。则“最高基数”填此上限，“企业最高收费”填 1000000。\n              ")])])],1)],1),t("a-form",{attrs:{form:e.form}},[t("div",{staticClass:"tab-title"},[e._v("基本信息")]),t("a-row",[""==e.addType?t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"城市",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["CityCode",{rules:e.AFormImportRules.selectReq}],expression:"['CityCode',{rules:AFormImportRules.selectReq}]"}],attrs:{allowClear:!0}},e._l(e.ComBranch,function(a){return t("a-select-option",{key:a.CityCode},[e._v(e._s(a.CityName))])}),1)],1)],1):e._e(),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"社保类型",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ShebaoType",{rules:e.AFormImportRules.selectReq}],expression:"['ShebaoType',{rules:AFormImportRules.selectReq}]"}],attrs:{allowClear:!0}},e._l(e.ShebaoTypeList,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"补缴限制",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BujiaoLimit",{rules:e.AFormImportRules.selectReq}],expression:"['BujiaoLimit',{rules:AFormImportRules.selectReq}]"}],attrs:{allowClear:!0}},e._l(e.BujiaoLimitList,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"补缴限制月数",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["BujiaoMonths",{rules:e.AFormImportRules.iptInputReq}],expression:"['BujiaoMonths',{rules:AFormImportRules.iptInputReq}]"}],staticStyle:{width:"100%"},attrs:{min:0}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"缴费周期",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ChargingCycle",{rules:e.AFormImportRules.selectReq}],expression:"['ChargingCycle',{rules:AFormImportRules.selectReq}]"}],attrs:{allowClear:!0}},e._l(e.ChargingCycleList,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"启用日期",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["StartDate",{rules:e.AFormImportRules.selectReq}],expression:"['StartDate',{rules:AFormImportRules.selectReq}]"}],staticStyle:{width:"100%"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"结束日期",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["EndDate"],expression:"['EndDate']"}],staticStyle:{width:"100%"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"最低基数",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["BaseMinNum",{rules:e.AFormImportRules.iptInputReq}],expression:"['BaseMinNum',{rules:AFormImportRules.iptInputReq}]"}],staticStyle:{width:"100%"},attrs:{min:0}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:"最高基数",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["BaseMaxNum",{rules:e.AFormImportRules.iptInputReq}],expression:"['BaseMaxNum',{rules:AFormImportRules.iptInputReq}]"}],staticStyle:{width:"100%"},attrs:{min:0}})],1)],1)],1),e._l(e.policyObject,function(a,o){return[t("div",{key:o},[t("div",{staticClass:"tab-title"},[e._v(e._s(10==a.ShebaoPolicyTarget?"企业信息":"个人信息"))]),t("a-row",[t("a-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:8}},[t("a-form-item",{attrs:{label:"社保政策对象",labelCol:{span:8},wrapperCol:{span:15}}},[t("a-select",{attrs:{allowClear:!0,disabled:e.policyObjectDis},model:{value:a.ShebaoPolicyTarget,callback:function(t){e.$set(a,"ShebaoPolicyTarget",t)},expression:"item.ShebaoPolicyTarget"}},[t("a-select-option",{key:"10"},[e._v("企业")]),t("a-select-option",{key:"20"},[e._v("个人")])],1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:10==a.ShebaoPolicyTarget?"企业费率":"个人费率",labelCol:{span:11},wrapperCol:{span:12}}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{formatter:function(e){return e+"%"},parser:function(e){return e.replace("%","")}},model:{value:a.Rate,callback:function(t){e.$set(a,"Rate",t)},expression:"item.Rate"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:10==a.ShebaoPolicyTarget?"企业最低收费":"个人最低收费",labelCol:{span:11},wrapperCol:{span:12}}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:a.Minimum,callback:function(t){e.$set(a,"Minimum",t)},expression:"item.Minimum"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:10==a.ShebaoPolicyTarget?"企业最高收费":"个人最高收费",labelCol:{span:11},wrapperCol:{span:12}}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:a.Maximum,callback:function(t){e.$set(a,"Maximum",t)},expression:"item.Maximum"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:10==a.ShebaoPolicyTarget?"企业新建补缴最低收费":"个人新建补缴最低收费",labelCol:{span:11},wrapperCol:{span:12}}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:a.CreateMinimum,callback:function(t){e.$set(a,"CreateMinimum",t)},expression:"item.CreateMinimum"}})],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{attrs:{label:10==a.ShebaoPolicyTarget?"企业新建补缴最高收费":"个人新建补缴最高收费",labelCol:{span:11},wrapperCol:{span:12}}},[t("a-input-number",{staticStyle:{width:"100%"},model:{value:a.CreateMaximum,callback:function(t){e.$set(a,"CreateMaximum",t)},expression:"item.CreateMaximum"}})],1)],1)],1)],1)]})],2)],1),t("modal-modify",{attrs:{show:e.modal.modify},on:{refresh:e.init}}),t("modal-detail",{attrs:{show:e.modal.detail,rolesb:e.rolesb},on:{refresh:e.init}})],1)],1)],1)},i=[],r=(t("ac6a"),t("b775")),s=(t("61f7"),t("40d3")),l=t("1fd1"),n={components:{ModalModify:s["default"],ModalDetail:l["default"]},data:function(){var e=[{title:"城市",scopedSlots:{customRender:"CityCode"}},{title:"已有社保",scopedSlots:{customRender:"shebao"}},{title:"操作",scopedSlots:{customRender:"action"}}];return{advanced:!0,columns:e,visible:!1,confirmLoading:!1,formSearch:{Keyword:"",pageSize:10,current:1,total:0,CityCode:""},form:this.$form.createForm(this),modifyForm:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!1,message:"请输入"}],iptInputReq:[{required:!0,message:"请输入"}],selectReq:[{required:!0,message:"请输入"}]},dataSource:[],drawer:{area:{show:!1}},modal:{modify:{show:!1},detail:{show:!1}},showaddLayer:!1,showmodifyLayer:!1,BujiaoLimit:[],ChargingCycle:[],ShebaoType:[],BujiaoLimitList:[],ChargingCycleList:[],ShebaoTypeList:[],policyObject:[{ShebaoPolicyTarget:"10"},{ShebaoPolicyTarget:"20"}],showAddPolicy:!0,policyObjectDis:!0,cityList:[{key:1304,name:"邯郸市"},{key:1306,name:"保定市"},{key:1310,name:"廊坊市"},{key:1307,name:"张家口市"},{key:1302,name:"唐山市"}],cityArray:[],addType:"",addCityCode:"",selectCity:{},rolesb:!1,ComBranch:[]}},mounted:function(){var e=this;e.init()},methods:{init:function(){var e=this;r["a"].post("/api/Dim/Enum/DimDecode",{Names:["City"]}).then(function(a){0===a.code&&(e.cityArray=a.data.City)}).catch(function(e){console.log(e)}),r["a"].post("/api/Dim/Enum/GetEnum",{Names:["sbType","ChargingCycle","BujiaoLimit"]}).then(function(a){0===a.code?(console.log(a),e.BujiaoLimitList=a.data.BujiaoLimit,e.ChargingCycleList=a.data.ChargingCycle,e.ShebaoTypeList=a.data.sbType,a.data.BujiaoLimit.forEach(function(a,t){e.BujiaoLimit[a.key]=a.text}),a.data.ChargingCycle.forEach(function(a,t){e.ChargingCycle[a.key]=a.text}),a.data.sbType.forEach(function(a,t){e.ShebaoType[a.key]=a.text}),e.pagechange(1)):e.$message.error(a.msg)}).catch(function(e){console.log(e)}),r["a"].post("/api/company/com/ComBranchList").then(function(a){0===a.code&&(e.ComBranch=a.data.rows)}).catch(function(e){console.log(e)})},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(e){var a=this;a.formSearch.current=e,a.$loading.open(),r["a"].post("/api/Shebao/Policy/List",a.formSearch).then(function(e){a.$loading.close(),0===e.code&&(a.dataSource=e.data.rows,a.formSearch.total=e.count,e.data.Operator.Roles.forEach(function(e,t){"98"==e&&(a.rolesb=!0)}))}).catch(function(e){a.$loading.close(),console.log(e)})},handleOk:function(e){var a=this,t={};this.form.validateFields(function(o,i){if(!o){t=i,"other"==a.addType&&(t.CityCode=a.addCityCode),t.StartDate=moment(t.StartDate).format("YYYY-MM-DD"),t.EndDate=moment(t.EndDate).format("YYYY-MM-DD");try{a.policyObject.forEach(function(e,o){if(void 0==e.Rate||void 0==e.Minimum||void 0==e.Maximum||void 0==e.CreateMinimum||void 0==e.CreateMaximum)throw a.$message.error("企业和个人收费标准为必填信息！若无上限则填100万，若无要求则填0。"),Error();10==e.ShebaoPolicyTarget?(t.ComRate=e.Rate,t.ComMinimum=e.Minimum,t.ComMaximum=e.Maximum,t.ComCreateMinimum=e.CreateMinimum,t.ComCreateMaximum=e.CreateMaximum):(t.PerRate=e.Rate,t.PerMinimum=e.Minimum,t.PerMaximum=e.Maximum,t.PerCreateMinimum=e.CreateMinimum,t.PerCreateMaximum=e.CreateMaximum)})}catch(e){return}r["a"].post("/api/Shebao/Policy/Add",t).then(function(e){0===e.code?(a.$message.success(e.msg),a.pagerefresh(),a.handleCancel()):a.$message.error(e.msg)}).catch(function(e){console.log(e)})}})},handleCancel:function(e){this.showaddLayer=!1,this.addType="",this.addCityCode="",this.form.resetFields(),this.policyObject=[{ShebaoPolicyTarget:"10"},{ShebaoPolicyTarget:"20"}]},addSubAccount:function(e,a){console.log(e),"city"==e?(this.addType="",this.addCityCode=""):(this.addType="other",this.addCityCode=a.CityCode),this.showaddLayer=!0},modifyPolicy:function(e){var a=this;a.modal.modify={show:!0,BujiaoLimitList:a.BujiaoLimitList,ChargingCycleList:a.ChargingCycleList,ShebaoTypeList:a.ShebaoTypeList}},modifyOk:function(e){var a=this;this.modifyForm.validateFields(function(e,t){e||a.handleCancel()})},modifyCancel:function(e){this.showmodifyLayer=!1},detail:function(e){var a=this;a.modal.detail={show:!0,cityArray:a.cityArray,BujiaoLimit:a.BujiaoLimit,ChargingCycle:a.ChargingCycle,ShebaoType:a.ShebaoType,cityList:a.cityArray,Guid:e.CityCode,BujiaoLimitList:a.BujiaoLimitList,ChargingCycleList:a.ChargingCycleList,ShebaoTypeList:a.ShebaoTypeList}},computer:function(e,a){var t=this;t.form.validateFields(function(a,o){a||("10"==e?t.policyObject[0].Rate&&(t.policyObject[0].Minimum=(t.policyObject[0].Rate*o.BaseMinNum/100).toFixed(2),o.BaseMaxNum&&(t.policyObject[0].Maximum=(t.policyObject[0].Rate*o.BaseMaxNum/100).toFixed(2)),"40"==o.ShebaoType?(t.policyObject[0].CreateMinimum=0,t.policyObject[0].CreateMaximum=0):(t.policyObject[0].CreateMinimum=(t.policyObject[0].Rate*o.BaseMinNum/100).toFixed(2),o.BaseMaxNum&&(t.policyObject[0].CreateMaximum=(t.policyObject[0].Rate*o.BaseMaxNum/100).toFixed(2)))):t.policyObject[1].Rate&&(t.policyObject[1].Minimum=(t.policyObject[1].Rate*o.BaseMinNum/100).toFixed(2),o.BaseMaxNum&&(t.policyObject[1].Maximum=(t.policyObject[1].Rate*o.BaseMaxNum/100).toFixed(2)),t.policyObject[1].CreateMinimum=(t.policyObject[1].Rate*o.BaseMinNum/100).toFixed(2),o.BaseMaxNum&&(t.policyObject[1].CreateMaximum=(t.policyObject[1].Rate*o.BaseMaxNum/100).toFixed(2))))})}}},c=n,m=(t("16e5"),t("2877")),u=Object(m["a"])(c,o,i,!1,null,null,null);a["default"]=u.exports}}]);