(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d04da7a","chunk-7fb094e4"],{2231:function(e,t,s){"use strict";var a=s("2632"),o=s.n(a);o.a},2632:function(e,t,s){},"636b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{attrs:{destroyOnClose:!0,visible:this.visible.show,maskClosable:!1,width:800,zIndex:1001,footer:!1,centered:!0},on:{cancel:e.onClose}},[s("template",{slot:"title"},[e._v(" 导入 ")]),s("a-form",{attrs:{form:e.form,layout:"horizontal"}},[s("a-row",{attrs:{gutter:11}},[s("a-col",{attrs:{md:12}},[s("a-form-item",{attrs:{label:"社保类型",labelCol:{span:7},wrapperCol:{span:17}}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sbtype",{rules:e.AFormRules.selected}],expression:"['sbtype',{rules:AFormRules.selected}]"}],attrs:{allowClear:!1}},e._l(e.sbList,function(t){return s("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1)],1),s("a-col",{attrs:{md:12}},[s("a-form-item",{attrs:{label:"月份",labelCol:{span:7},wrapperCol:{span:17}}},[s("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["nianYue",{rules:e.AFormRules.selected}],expression:"['nianYue',{rules:AFormRules.selected}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择月份"}})],1)],1),s("a-col",{attrs:{span:12}},[s("a-form-item",{attrs:{label:"供应商",labelCol:{span:7},wrapperCol:{span:17}}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["GYSGuid",{rules:e.AFormRules.selected}],expression:"['GYSGuid',{rules:AFormRules.selected}]"}],attrs:{"show-search":"",placeholder:"请输入后选择","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,width:350},on:{search:e.handleSearchGys}},[e.searchGysData.length>0?e._l(e.searchGysData,function(t){return s("a-select-option",{key:t.GYSGuid},[e._v("\n                "+e._s(t.GYSName)+"\n              ")])}):[s("a-select-option",{key:0,attrs:{disabled:!0}},[e._v("\n                没有该供应商，点击右侧添加，添加供应商后选择\n              ")])]],2)],1)],1),s("a-col",{staticStyle:{"line-height":"39px"},attrs:{span:4,align:"left"}},[0==e.searchGysData.length?s("a-button",{attrs:{type:"primary"},on:{click:e.addGys}},[e._v("添加")]):e._e()],1),s("a-col",{attrs:{md:24}},[s("a-form-item",{attrs:{label:"",labelCol:{span:7},wrapperCol:{span:254}}},[s("a-spin",{attrs:{tip:"上传中",spinning:e.spinning}},[s("a-upload-dragger",{attrs:{name:"file",multiple:!1,action:"/api/Order/Import/ShebaoPaymentImport",accept:".xls, .xlsx",showUploadList:!1,withCredentials:!0,"before-upload":e.uploadbefore,data:e.uploadData},on:{change:e.uploadchange}},[s("p",{staticClass:"ant-upload-drag-icon"},[s("a-icon",{attrs:{type:"inbox"}})],1),s("p",{staticClass:"ant-upload-text"},[e._v("\n                将文件拖到此处，或\n                "),s("a-tag",{attrs:{color:"#2db7f5"}},[e._v("点击上传")])],1),s("p",{staticClass:"ant-upload-hint"},[e._v("只能上传xls/xlsx文件")])])],1)],1)],1)],1)],1),s("a-modal",{attrs:{destroyOnClose:!0,visible:this.errorShow,maskClosable:!1,width:400,zIndex:1001,footer:!1,centered:!0},on:{cancel:e.onCloseError}},[s("template",{slot:"title"},[e._v(" 增员派单导入失败 ")]),s("a-row",e._l(e.errorlist,function(t,a){return s("a-col",{key:a,attrs:{span:22}},[e._v(e._s(a+1)+". "+e._s(t.msg))])}),1),s("a-tag",{staticStyle:{"margin-top":"15px"},attrs:{color:"red"}},[e._v("\n      请修改后重新导入！！！\n    ")])],2),s("model-add-gys",{attrs:{show:e.modal.addgys,gysname:e.gysText,refresh:e.handleChangeGys}})],2)},o=[],r=s("b775"),n=s("c32d"),i=s.n(n),l=s("96fd"),c={components:{ModelAddGys:l["default"]},props:{show:{type:Object,default:function(){return{show:!1}}},refresh:{type:Function,default:null}},data:function(){return{spinning:!1,visible:{show:!1,sbDetail:{},sbType:{},DoTypeArray:[]},form:this.$form.createForm(this),AFormRules:{selected:[{required:!0,message:"请选择"}]},assetsdetail:{},errdatarows:[],errorShow:!1,errorlist:[],sbList:[],modal:{addgys:{show:!1}},formSearch:{sbType:"",GYSGuid:""},uploadData:{sbType:"",GYSGuid:"",nianYue:""},searchGysData:[],gysText:""}},watch:{show:function(e,t){var s=this;s.visible=e}},created:function(){var e=this;this.$watch("show",function(t,s){e.visible=t,e.visible.show&&e.init()})},methods:{onClose:function(){this.visible.show=!1,this.form.resetFields()},init:function(){var e=this;r["a"].post("/api/Dim/Enum/GetEnum",{Names:["sbType"]}).then(function(t){0===t.code?e.sbList=t.data.sbType:e.$message.error(t.msg)}).catch(function(e){console.log(e)})},uploadbefore:function(e){var t=this,s=this,a=!1;return this.form.validateFields(function(e,o){a=!e,a&&(t.spinning=!0,console.log(s.formSearch.nianYue),t.uploadData.sbType=o.sbtype,t.uploadData.GYSGuid=o.GYSGuid,t.uploadData.nianYue=o.nianYue?i()(o.nianYue).format("YYYY-MM"):"")}),a},uploadchange:function(e){var t=e.file,s=e.fileList;e.event;if("uploading"!==t.status&&console.log(t,s),"done"==t.status){var a=t.response;a.code>0?(this.$message.error(a.msg),a.data&&(this.errdatarows=a.data)):a.data.rows.length>0&&""!=a.data.rows[0].msg?(this.errorlist=a.data.rows,this.errorShow=!0):(this.$message.success("导入成功"),this.refresh(),this.onClose())}this.spinning=!1},onCloseError:function(){this.errorShow=!1},fetchGys:function(e,t){this.GysName=e,this.searchGys(e,t)},handleSearchGys:function(e){var t=this;this.gysText=e,this.fetchGys(e,function(e){return t.searchGysData=e}),console.log(this.searchGysData)},handleChangeGys:function(e){var t=this;console.log(e),this.GysName=e,e&&this.fetchGys(e,function(e){return t.searchGysData=e})},searchGys:function(e,t){var s=this;r["a"].post("/api/Company/GYS/List",{Keyword:e,Current:1,PageSize:99}).then(function(e){0===e.code&&(s.GysList=e.data.rows,t(e.data.rows))}).catch(function(e){console.log(e)})},addGys:function(){var e=this;e.modal.addgys={show:!0}}}},u=c,d=(s("2231"),s("2877")),h=Object(d["a"])(u,a,o,!1,null,"5be5bbec",null);t["default"]=h.exports},"6eaa":function(e,t,s){},"96fd":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{attrs:{destroyOnClose:!1,visible:this.visible.show,maskClosable:!1,width:450,zIndex:1001,centered:!0},on:{cancel:e.onClose,ok:e.submit}},[s("template",{slot:"title"},[e._v("\n  添加派出公司\n")]),s("a-form",{attrs:{form:e.form}},[s("a-form-item",{attrs:{label:"派出公司",labelCol:{span:5},wrapperCol:{span:16}}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["GYSName",{initialValue:e.gysname,rules:e.AFormImportRules.iptInputReq}],expression:"['GYSName',{initialValue:gysname,rules:AFormImportRules.iptInputReq}]"}]})],1)],1)],2)},o=[],r=s("b775"),n={props:{show:{type:Object,default:function(){return{show:!1}}},gysname:{type:String,default:""}},data:function(){return{visible:{show:!1},form:this.$form.createForm(this),AFormImportRules:{iptInputReq:[{required:!0,message:"请输入"}]}}},watch:{show:function(e,t){var s=this;s.visible=e}},created:function(){var e=this;this.$watch("show",function(t,s){e.visible=t,e.visible.show&&e.init()})},methods:{onClose:function(){this.visible.show=!1,this.form.resetFields()},init:function(){},submit:function(){var e=this;this.form.validateFields(function(t,s){if(!t){var a=s;r["a"].post("/api/Company/GYS/Add",a).then(function(t){0===t.code?(e.$message.success("提交成功!"),e.onClose()):e.$message.error(t.msg)}).catch(function(e){console.log(e)})}})}}},i=n,l=(s("e323"),s("2877")),c=Object(l["a"])(i,a,o,!1,null,"c163ba14",null);t["default"]=c.exports},e323:function(e,t,s){"use strict";var a=s("6eaa"),o=s.n(a);o.a}}]);