(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dc19b98"],{2811:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{destroyOnClose:!0,visible:this.visible.show,maskClosable:!1,width:600,zIndex:1001},on:{cancel:e.onClose,ok:e.submitSbDate}},[a("template",{slot:"title"},[e._v("\n  申增成功\n")]),a("a-form",{attrs:{form:e.form}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"险种名称",labelCol:{span:9},wrapperCol:{span:15}}},[e._v("\n            "+e._s(e.visible.sbType[e.visible.sbDetail.sbType])+"\n          ")])],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"开始日期",labelCol:{span:9},wrapperCol:{span:15}}},[e._v("\n            "+e._s(e.moment(e.visible.sbDetail.Startime).format("YYYY-MM-DD"))+"\n          ")])],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"工资",labelCol:{span:9},wrapperCol:{span:15}}},[e._v("\n            "+e._s(e.visible.sbDetail.Jishu)+"\n          ")])],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"比例",labelCol:{span:9},wrapperCol:{span:15}}},[e._v("\n            "+e._s(e.visible.sbDetail.Bili)+"\n          ")])],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{staticStyle:{"margin-left":"16px"},attrs:{label:"社保账户",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["SBAccountID",{rules:e.AFormImportRules.iptSelect}],expression:"['SBAccountID',{rules:AFormImportRules.iptSelect}]"}],attrs:{allowClear:!0}},e._l(e.dataAccount,function(t){return a("a-select-option",{key:t.ID},[e._v(e._s(t.AccountName)+"--"+e._s(t.AccountNumber))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"实际起做日期",labelCol:{span:9},wrapperCol:{span:15}}},[a("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["ActStartime",{rules:e.AFormImportRules.iptInput}],expression:"['ActStartime',{rules:AFormImportRules.iptInput}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择月份"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"操作类型",labelCol:{span:9},wrapperCol:{span:15}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DoType",{rules:e.AFormImportRules.iptSelect}],expression:"['DoType',{rules:AFormImportRules.iptSelect}]"}],attrs:{allowClear:!0},on:{change:e.controlChange}},e._l(e.visible.DoTypeArray,function(t){return a("a-select-option",{key:t.key,attrs:{disabled:"30"==t.key}},[e._v(e._s(t.text))])}),1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{staticStyle:{"margin-left":"12px"},attrs:{label:"备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{rules:e.AFormImportRules.remark}],expression:"['Remarks',{rules:AFormImportRules.remark}]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],2)},s=[],r=a("b775"),i=a("c32d"),l=a.n(i),n={props:{show:{type:Object,default:function(){return{show:!1}}},refresh:{type:Function,default:function(){}}},data:function(){return{visible:{show:!1,sbDetail:{},sbType:{},DoTypeArray:[],role:"",type:"",ComServiceGuid:""},form:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!0,message:"请输入"}],iptSelect:[{required:!0,message:"请选择"}],remark:[{required:!1,message:"请输入"}]},assetsdetail:{},moment:l.a,dataAccount:[],accountList:[]}},watch:{show:function(e,t){var a=this;a.visible=e}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.visible.show&&e.init()})},methods:{onClose:function(){this.visible.show=!1,this.form.resetFields(),this.AFormImportRules.remark[0].required=!1,this.refresh&&this.refresh(),this.visible.type=""},init:function(){var e=this;console.log(e.visible),r["a"].post("/api/company/SBAccount/Detail",{ComServiceGuid:e.visible.sbDetail.ComServiceGuid}).then(function(t){0===t.code&&(e.accountList=t.data.accountList,e.dataAccount=e.sbFilter("40"),"77"==e.visible.role&&1==e.dataAccount.length&&e.form.setFieldsValue({SBAccountID:e.dataAccount[0].ID}))}).catch(function(e){console.log(e)})},sbFilter:function(e){var t=this,a=this.accountList.filter(function(a){return a.AccountType==e&&a.CityCode==t.visible.sbDetail.CityCode});if(a.length>0)return a},submitSbDate:function(){var e=this,t={};e.form.validateFields(function(a,o){if(!a){if(t=o,t.SBGUID=e.visible.sbDetail.SBGUID,t.ActStartime=l()(o.ActStartime).format("YYYY-MM-01"),"77"==e.visible.role&&(t.FirstBillMonth=l()(o.FirstBillMonth).format("YYYY-MM-01")),30==o.DoType&&""==o.Remarks)return void e.$message.error("请输入备注！");e.$loading.open(),r["a"].post("/api/Employee/SheBaoDLH/IncSucceed",t).then(function(a){e.$loading.close(),0===a.code?(e.$message.success(a.msg),e.onClose()):"该月份已锁定！"===a.msg?(t.ConfirmRemarks=o.Remarks,t.ActStartime=l()(o.CanStartDate).format("YYYY-MM-01"),t.FirstBillMonth=l()(o.FirstBillMonth).format("YYYY-MM-01"),e.$confirm({zIndex:1002,title:"该月份已锁定，是否申请追加此月份?",content:"点击确定确认。",onOk:function(){r["a"].post("/api/Employee/SheBaoApproval/SheBaoApprove",t).then(function(t){0===t.code?(e.$message.success(t.msg),e.refresh(),e.onClose()):e.$message.error(t.msg)}).catch(function(e){console.log(e)})},onCancel:function(){}})):e.$message.error(a.msg)}).catch(function(t){e.$loading.close(),console.log(t)})}})},controlChange:function(e){this.AFormImportRules.remark[0].required=30==e}}},c=n,m=(a("f65a"),a("2877")),p=Object(m["a"])(c,o,s,!1,null,"2e64fc07",null);t["default"]=p.exports},"85e5":function(e,t,a){},f65a:function(e,t,a){"use strict";var o=a("85e5"),s=a.n(o);s.a}}]);