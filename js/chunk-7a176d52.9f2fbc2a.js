(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a176d52"],{"161d":function(t,a,e){"use strict";var l=e("d911"),n=e.n(l);n.a},"89b0":function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-modal",{attrs:{destroyOnClose:!0,visible:this.visible.show,maskClosable:!1,width:1100,centered:"",zIndex:1001},on:{cancel:t.onClose,ok:t.submitSbDate}},[e("template",{slot:"title"},[t._v("\n  确认\n")]),e("a-form",{attrs:{form:t.form}},[e("a-row",[e("a-col",{attrs:{span:5}},[e("a-form-item",{attrs:{label:"姓名",labelCol:{span:5},wrapperCol:{span:15}}},[t._v("\n            "+t._s(t.sbDetail[0]["姓名"])+"\n          ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"身份证号",labelCol:{span:6},wrapperCol:{span:15}}},[t._v("\n            "+t._s(t.sbDetail[0]["身份证号"])+"\n          ")])],1),e("a-col",{attrs:{span:13}},[e("a-form-item",{attrs:{label:"公司名称",labelCol:{span:3},wrapperCol:{span:19}}},[t._v("\n            "+t._s(t.sbDetail[0].ComName)+"\n          ")])],1),t._l(t.sbDetail,function(a,l){return[a.Done&&null==a.Confirm?e("div",{key:l},[e("a-col",{attrs:{span:24}},[e("a-form-item",{attrs:{label:"",labelCol:{span:0},wrapperCol:{span:15}}},[e("a-checkbox",{attrs:{checked:a.checked},on:{change:function(a){return t.handleChange(l)}}},[t._v("\n              "+t._s(t.visible.sbType[a.sbType])+" "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(1==a.IsApproval?"[审批中]":""))])])],1)],1),e("a-col",{attrs:{span:24}},[e("table",{staticClass:"mytable",attrs:{border:"1"}},[e("thead",[e("tr",[e("th",[t._v("工资")]),e("th",[t._v("比例")]),e("th",[t._v("可以开始月份")]),e("th",[t._v("派单开始时间")]),e("th",[t._v("交接")]),e("th",[t._v("交接人")]),e("th",[t._v("备注")])])]),e("tbody",[e("tr",[e("td",{attrs:{width:"100px"}},[t._v(t._s(a.Jishu))]),e("td",[t._v(t._s(a.Bili))]),e("td",[t._v(t._s(a.CanStartDate?t.moment(a.CanStartDate).format("YYYY-MM"):""))]),e("td",[t._v(t._s(a.Startime))]),e("td",[t._v(t._s(t.visible.DoType[a.DoType]))]),e("td",[t._v(t._s(t.visible.UserArray[a.Userid])),e("br"),t._v(t._s(a.DoneTime))]),e("td",[t._v(t._s(a.Remarks))])])])])]),0==l?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"实际起做日期",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{disabledDate:t.disabledDate0,allowClear:!1,placeholder:"请选择月份"},on:{change:function(e){return t.changeActTime(a.ActStartime,l)}},model:{value:a.ActStartime,callback:function(e){t.$set(a,"ActStartime",e)},expression:"item.ActStartime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"运行操作月",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{allowClear:!1,placeholder:"请选择月份"},model:{value:a.FirstBillMonth,callback:function(e){t.$set(a,"FirstBillMonth",e)},expression:"item.FirstBillMonth"}})],1)],1)]:t._e(),1==l?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"实际起做日期",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{disabledDate:t.disabledDate1,allowClear:!1,placeholder:"请选择月份"},on:{change:function(e){return t.changeActTime(a.ActStartime,l)}},model:{value:a.ActStartime,callback:function(e){t.$set(a,"ActStartime",e)},expression:"item.ActStartime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"运行操作月",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{allowClear:!1,placeholder:"请选择月份"},model:{value:a.FirstBillMonth,callback:function(e){t.$set(a,"FirstBillMonth",e)},expression:"item.FirstBillMonth"}})],1)],1)]:t._e(),2==l?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"实际起做日期",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{disabledDate:t.disabledDate2,allowClear:!1,placeholder:"请选择月份"},on:{change:function(e){return t.changeActTime(a.ActStartime,l)}},model:{value:a.ActStartime,callback:function(e){t.$set(a,"ActStartime",e)},expression:"item.ActStartime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"运行操作月",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{allowClear:!1,placeholder:"请选择月份"},model:{value:a.FirstBillMonth,callback:function(e){t.$set(a,"FirstBillMonth",e)},expression:"item.FirstBillMonth"}})],1)],1)]:t._e(),3==l?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"实际起做日期",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{disabledDate:t.disabledDate3,allowClear:!1,placeholder:"请选择月份"},on:{change:function(e){return t.changeActTime(a.ActStartime,l)}},model:{value:a.ActStartime,callback:function(e){t.$set(a,"ActStartime",e)},expression:"item.ActStartime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"运行操作月",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{allowClear:!1,placeholder:"请选择月份"},model:{value:a.FirstBillMonth,callback:function(e){t.$set(a,"FirstBillMonth",e)},expression:"item.FirstBillMonth"}})],1)],1)]:t._e(),4==l?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"实际起做日期",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{disabledDate:t.disabledDate4,allowClear:!1,placeholder:"请选择月份"},on:{change:function(e){return t.changeActTime(a.ActStartime,l)}},model:{value:a.ActStartime,callback:function(e){t.$set(a,"ActStartime",e)},expression:"item.ActStartime"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"运行操作月",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{allowClear:!1,placeholder:"请选择月份"},model:{value:a.FirstBillMonth,callback:function(e){t.$set(a,"FirstBillMonth",e)},expression:"item.FirstBillMonth"}})],1)],1)]:t._e(),10==a.sbType?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"社保账户",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-select",{attrs:{allowClear:!0},model:{value:a.SBAccountID,callback:function(e){t.$set(a,"SBAccountID",e)},expression:"item.SBAccountID"}},t._l(t.yanglao,function(a){return e("a-select-option",{key:a.ID},[t._v(t._s(a.AccountName)+"--"+t._s(a.AccountNumber))])}),1)],1)],1)]:t._e(),20==a.sbType?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"社保账户",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-select",{attrs:{allowClear:!0},model:{value:a.SBAccountID,callback:function(e){t.$set(a,"SBAccountID",e)},expression:"item.SBAccountID"}},t._l(t.shiye,function(a){return e("a-select-option",{key:a.ID},[t._v(t._s(a.AccountName)+"--"+t._s(a.AccountNumber))])}),1)],1)],1)]:t._e(),30==a.sbType?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"社保账户",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-select",{attrs:{allowClear:!0},model:{value:a.SBAccountID,callback:function(e){t.$set(a,"SBAccountID",e)},expression:"item.SBAccountID"}},t._l(t.gongshang,function(a){return e("a-select-option",{key:a.ID},[t._v(t._s(a.AccountName)+"--"+t._s(a.AccountNumber))])}),1)],1)],1)]:t._e(),40==a.sbType?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"社保账户",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-select",{attrs:{allowClear:!0},model:{value:a.SBAccountID,callback:function(e){t.$set(a,"SBAccountID",e)},expression:"item.SBAccountID"}},t._l(t.yiliao,function(a){return e("a-select-option",{key:a.ID},[t._v(t._s(a.AccountName)+"--"+t._s(a.AccountNumber))])}),1)],1)],1)]:t._e(),50==a.sbType?[e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"社保账户",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-select",{attrs:{allowClear:!0},model:{value:a.SBAccountID,callback:function(e){t.$set(a,"SBAccountID",e)},expression:"item.SBAccountID"}},t._l(t.gongjijin,function(a){return e("a-select-option",{key:a.ID},[t._v(t._s(a.AccountName)+"--"+t._s(a.AccountNumber))])}),1)],1)],1)]:t._e(),e("a-col",{attrs:{span:12}},[e("a-form-item",{staticStyle:{margin:"0 0 10px -5px"},attrs:{label:"备注",labelCol:{span:6},wrapperCol:{span:17}}},[e("a-textarea",{attrs:{placeholder:"备注",rows:2},model:{value:a.ConfirmRemarks,callback:function(e){t.$set(a,"ConfirmRemarks",e)},expression:"item.ConfirmRemarks"}})],1)],1)],2):t._e()]})],2)],1)],2)},n=[],s=(e("ac6a"),e("b775")),o=e("c32d"),i=e.n(o),r={components:{},props:{show:{type:Object,default:function(){return{show:!1}}},refresh:{type:Function,default:""}},data:function(){return{visible:{show:!1,sbType:{},UserArray:[],SBGUID:"",DoType:{},CanStartDate:"",ComServiceGuid:"",CityCode:""},form:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!0,message:"请输入"}],iptSelect:[{required:!0,message:"请选择"}],remark:[{required:!1,message:"请输入"}]},sbDetail:[{"姓名":"","身份证号":"",ComName:""}],modal:{},moment:i.a,actTime:void 0,initDate:void 0,checkNick:!0,yanglao:[],shiye:[],gongshang:[],yiliao:[],gongjijin:[],dataAccount:[]}},watch:{show:function(t,a){var e=this;e.visible=t}},created:function(){var t=this;this.$watch("show",function(a,e){t.visible=a,t.visible.show&&t.init()})},methods:{onClose:function(){this.visible.show=!1,this.yanglao=[],this.shiye=[],this.gongshang=[],this.yiliao=[],this.gongjijin=[],this.dataAccount=[],this.form.resetFields(),this.sbDetail=[{"姓名":"","身份证号":"",ComName:""}]},init:function(){var t=this;new Date;s["a"].post("/api/employee/shebao/shebaoList",{RLZGUID:t.visible.RLZGUID}).then(function(a){if(t.$loading.close(),0===a.code){new Date;a.data.forEach(function(t,a){t.FirstBillMonth=void 0,t.CanStartDate?t.ActStartime=i()(t.CanStartDate):delete t.ActStartime,t.Done&&null==t.Confirm?t.checked=!0:t.checked=!1,t.SBAccountID=""}),t.sbDetail=a.data,s["a"].post("/api/company/SBAccount/Detail",{ComServiceGuid:t.visible.ComServiceGuid}).then(function(a){0===a.code&&(a.data.accountList&&a.data.accountList.length>0&&a.data.accountList.forEach(function(a,e){a.CityCode==t.visible.CityCode&&t.dataAccount.push(a)}),t.yanglao=t.sbFilter("10"),t.shiye=t.sbFilter("20"),t.gongshang=t.sbFilter("30"),t.yiliao=t.sbFilter("40"),t.gongjijin=t.sbFilter("50"),t.sbDetail.forEach(function(a){10==a.sbType&&1==t.yanglao.length&&(a.SBAccountID=t.yanglao[0].ID),20==a.sbType&&1==t.shiye.length&&(a.SBAccountID=t.shiye[0].ID),30==a.sbType&&1==t.gongshang.length&&(a.SBAccountID=t.gongshang[0].ID),40==a.sbType&&1==t.yiliao.length&&(a.SBAccountID=t.yiliao[0].ID),50==a.sbType&&1==t.gongjijin.length&&(a.SBAccountID=t.gongjijin[0].ID)}))}).catch(function(t){console.log(t)})}}).catch(function(a){t.$loading.close(),console.log(a)})},sbFilter:function(t){var a=this.dataAccount.filter(function(a){return a.AccountType==t});return a.length>0?a:[]},submitSbDate:function(){var t=this,a=[];t.form.validateFields(function(e,l){if(!e){try{t.sbDetail.forEach(function(e){if(e.Done&&null==e.Confirm&&e.checked){var l={};if(l.SBGUID=e.SBGUID,e.ActStartime?l.ActStartime=e.ActStartime?i()(e.ActStartime).format("YYYY-MM-01"):"":(t.$message.error(t.visible.sbType[e.sbType]+"实际起做日期为空！"),back),e.FirstBillMonth?l.FirstBillMonth=e.FirstBillMonth?i()(e.FirstBillMonth).format("YYYY-MM-01"):"":(t.$message.error(t.visible.sbType[e.sbType]+"运行操作月为空！"),back),l.DoType=e.DoType,l.ConfirmRemarks=e.ConfirmRemarks,""==e.SBAccountID)throw t.$message.error("社保账户为必填项！如果没有社保账户请与运行部门沟通！"),Error();console.log(i()(void 0).format("YYYY-MM-01")),l.SBAccountID=e.SBAccountID,a.push(l),console.log(a)}})}catch(n){return}if(0==a.length)return void t.$message.error("请选择需要确认的险种！");t.$loading.open(),s["a"].post("/api/Employee/shebao/batchConfirm",a).then(function(e){t.$loading.close(),0===e.code?(t.$message.success(e.msg),t.onClose(),t.refresh()):-1===e.code?t.$confirm({zIndex:1002,title:e.msg,content:"点击确定确认。",onOk:function(){s["a"].post("/api/Employee/shebao/batchConfirm?IsIsApproval=1",a).then(function(a){0===a.code?(t.$message.success(a.msg),t.refresh(),t.onClose()):t.$message.error(a.msg)}).catch(function(t){console.log(t)})},onCancel:function(){}}):t.$message.error(e.msg)}).catch(function(a){t.$loading.close(),console.log(a)})}})},changeActTime:function(t,a){console.log(a);new Date},disabledDate0:function(t){return t<i()(this.sbDetail[0].CanStartDate)},disabledDate1:function(t){return t<i()(this.sbDetail[1].CanStartDate)},disabledDate2:function(t){return t<i()(this.sbDetail[2].CanStartDate)},disabledDate3:function(t){return t<i()(this.sbDetail[3].CanStartDate)},disabledDate4:function(t){return t<i()(this.sbDetail[4].CanStartDate)},disabledFirstDate0:function(t){var a=new Date,e=this;return i()(e.sbDetail[0].ActStartime).format("YYYY-MM-01")<i()(a).format("YYYY-MM-01")?t<i()(a).startOf("month"):t<i()(e.sbDetail[0].ActStartime).startOf("month")},disabledFirstDate1:function(t){var a=new Date,e=this;return i()(e.sbDetail[1].ActStartime).format("YYYY-MM-01")<i()(a).format("YYYY-MM-01")?t<i()(a).startOf("month"):t<i()(e.sbDetail[1].ActStartime).startOf("month")},disabledFirstDate2:function(t){var a=new Date,e=this;return i()(e.sbDetail[2].ActStartime).format("YYYY-MM-01")<i()(a).format("YYYY-MM-01")?t<i()(a).startOf("month"):t<i()(e.sbDetail[2].ActStartime).startOf("month")},disabledFirstDate3:function(t){var a=new Date,e=this;return i()(e.sbDetail[3].ActStartime).format("YYYY-MM-01")<i()(a).format("YYYY-MM-01")?t<i()(a).startOf("month"):t<i()(e.sbDetail[3].ActStartime).startOf("month")},disabledFirstDate4:function(t){var a=new Date,e=this;return i()(e.sbDetail[4].ActStartime).format("YYYY-MM-01")<i()(a).format("YYYY-MM-01")?t<i()(a).startOf("month"):t<i()(e.sbDetail[4].ActStartime).startOf("month")},handleChange:function(t){console.log(t),this.sbDetail[t].checked=!this.sbDetail[t].checked}}},c=r,m=(e("161d"),e("2877")),p=Object(m["a"])(c,l,n,!1,null,"25884f0a",null);a["default"]=p.exports},d911:function(t,a,e){}}]);